<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã€Šåº•å±¤é‚è¼¯ã€‹æ ¸å¿ƒæ´å¯Ÿè³‡è¨Šåœ–è¡¨ (AIäº’å‹•ç‰ˆ)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .gradient-text {
            background: linear-gradient(to right, #00A0B0, #EB6841);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .flow-arrow {
            position: relative;
            padding: 0 1.5rem;
        }
        .flow-arrow::after {
            content: 'â†’';
            position: absolute;
            right: -0.5rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5rem;
            color: #EB6841;
        }
        .flow-arrow-down::after {
            content: 'â†“';
            position: absolute;
            bottom: -1.5rem;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.5rem;
            color: #EB6841;
        }
        .ai-input:focus {
            outline: none;
            box-shadow: 0 0 0 2px #00A0B0;
        }
        .ai-button {
            transition: all 0.3s ease;
        }
        .ai-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #00A0B0;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-6xl font-bold mb-2 gradient-text">åº•å±¤é‚è¼¯</h1>
            <p class="text-xl md:text-2xl text-gray-600">çœ‹æ¸…é€™å€‹ä¸–ç•Œçš„åº•ç‰Œ (AIäº’å‹•ç‰ˆ)</p>
        </header>

        <main class="space-y-16">

            <section id="section1">
                <div class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                    <h2 class="text-2xl md:text-3xl font-bold text-center mb-2 text-[#00A0B0]">æ˜¯éå°éŒ¯çš„åº•å±¤é‚è¼¯</h2>
                    <p class="text-center text-gray-600 mb-8 max-w-3xl mx-auto">ç•¶ä¸€ä»¶ä¸å¥½çš„äº‹æƒ…ç™¼ç”Ÿæ™‚ï¼Œæˆ‘å€‘ç¿’æ…£æ–¼çˆ­è«–èª°å°èª°éŒ¯ã€‚ä½†å¾ä¸åŒè¦–è§’å‡ºç™¼ï¼Œå°éŒ¯çš„æ­¸å±¬æˆªç„¶ä¸åŒã€‚çœŸæ­£æˆç†Ÿçš„æ€è€ƒè€…ï¼Œæœƒè¶…è¶Šæƒ…ç·’ï¼Œå¾æå¤±çš„è§’åº¦çœ‹å¾…å•é¡Œï¼Œä¸¦å¾ä¸­å­¸ç¿’èˆ‡æˆé•·ã€‚</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center mb-12">
                        <div class="border-2 border-[#EDC951] rounded-lg p-6 transform hover:scale-105 transition-transform">
                            <p class="text-5xl mb-4">âš–ï¸</p>
                            <h3 class="text-xl font-bold mb-2">æ³•å­¸å®¶è¦–è§’</h3>
                            <p class="text-gray-600">åˆ¤æ–·æ¨™æº–æ˜¯ã€Œè­‰æ“šã€ã€‚èª°é•åäº†è¦å‰‡ï¼Œèª°å°±æ˜¯éŒ¯çš„ã€‚é€™æ˜¯å°å€‹é«”è¡Œç‚ºæœ€ç›´æ¥çš„è©•åˆ¤ã€‚</p>
                        </div>
                        <div class="border-2 border-[#EB6841] rounded-lg p-6 transform hover:scale-105 transition-transform">
                            <p class="text-5xl mb-4">ğŸ’¹</p>
                            <h3 class="text-xl font-bold mb-2">ç¶“æ¿Ÿå­¸å®¶è¦–è§’</h3>
                            <p class="text-gray-600">åˆ¤æ–·æ¨™æº–æ˜¯ã€Œç¤¾æœƒç¸½æˆæœ¬ã€ã€‚èª°çš„é é˜²æˆæœ¬æœ€ä½ï¼Œèª°å°±æ‡‰è©²æ‰¿æ“”è²¬ä»»ï¼Œä»¥ä¿ƒä½¿æ•´é«”æ•ˆç‡æœ€é«˜ã€‚</p>
                        </div>
                        <div class="border-2 border-[#CC333F] rounded-lg p-6 transform hover:scale-105 transition-transform">
                            <p class="text-5xl mb-4">ğŸ‘”</p>
                            <h3 class="text-xl font-bold mb-2">å•†äººè¦–è§’</h3>
                            <p class="text-gray-600">åˆ¤æ–·æ¨™æº–æ˜¯ã€Œèª°çš„æå¤±æœ€å¤§ã€ã€‚ç„¡è«–èª°å°èª°éŒ¯ï¼Œæå¤±æœ€å¤§çš„ä¸€æ–¹éƒ½æœ‰è²¬ä»»åæ€å¦‚ä½•é¿å…æœªä¾†å†æ¬¡ç™¼ç”Ÿã€‚</p>
                        </div>
                    </div>

                    <div class="mt-8 border-t-2 border-dashed border-gray-300 pt-8">
                        <h3 class="text-xl md:text-2xl font-bold text-center mb-4">âœ¨ AI é›£é¡Œåˆ†æå™¨</h3>
                        <p class="text-center text-gray-600 mb-6">è¼¸å…¥ä¸€å€‹æ‚¨é‡åˆ°çš„å•†æ¥­æˆ–å·¥ä½œé›£é¡Œï¼Œçœ‹çœ‹AIå¦‚ä½•å¾ä¸‰ç¨®ä¸åŒè¦–è§’ç‚ºæ‚¨å‰–æå•é¡Œã€‚</p>
                        <div class="max-w-2xl mx-auto">
                            <textarea id="dilemmaInput" rows="3" class="w-full p-3 border border-gray-300 rounded-lg ai-input" placeholder="ä¾‹å¦‚ï¼šæ–°ç”¢å“ä¸Šå¸‚å¾ŒéŠ·é‡ä¸å¦‚é æœŸï¼ŒéŠ·å”®éƒ¨é–€å’Œç”¢å“éƒ¨é–€äº’ç›¸æŒ‡è²¬..."></textarea>
                            <button id="analyzeDilemmaBtn" class="w-full mt-4 bg-gradient-to-r from-[#00A0B0] to-[#EB6841] text-white font-bold py-3 px-6 rounded-lg ai-button">
                                é€²è¡Œå¤šç¶­åº¦åˆ†æ
                            </button>
                        </div>
                        <div id="dilemmaResult" class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6"></div>
                    </div>
                </div>
            </section>

            <section id="section2">
                <div class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                    <h2 class="text-2xl md:text-3xl font-bold text-center mb-2 text-[#00A0B0]">æ€è€ƒå•é¡Œçš„åº•å±¤é‚è¼¯</h2>
                    <p class="text-center text-gray-600 mb-8 max-w-3xl mx-auto">å„ªç§€çš„æ€è€ƒè€…èƒ½å¤ ç©¿é€ç¾è±¡çš„è¿·éœ§ï¼Œç›´é”å•é¡Œçš„æœ¬è³ªã€‚é€™éœ€è¦ä¸€å¥—ç§‘å­¸çš„æ€ç¶­æ¡†æ¶ï¼Œå¾å€åˆ†è¡¨è¿°é¡å‹é–‹å§‹ï¼Œåˆ°å»ºç«‹é©—è­‰è¿´è·¯ï¼Œæœ€çµ‚æ´å¯Ÿæ•´å€‹ç³»çµ±çš„é‹ä½œæ–¹å¼ã€‚</p>
                    
                    <div class="flex flex-col items-center justify-center space-y-4 md:space-y-0 md:flex-row md:space-x-4">
                        <div class="text-center p-4 bg-[#EDC951] text-white rounded-lg shadow-md w-48 flow-arrow-down md:flow-arrow-down-0 md:flow-arrow"><span>å‡è¨­</span></div>
                        <div class="text-center p-4 bg-[#EB6841] text-white rounded-lg shadow-md w-48 flow-arrow-down md:flow-arrow-down-0 md:flow-arrow"><span>é©—è­‰</span></div>
                        <div class="text-center p-4 bg-[#CC333F] text-white rounded-lg shadow-md w-48 flow-arrow-down md:flow-arrow-down-0 md:flow-arrow"><span>çµè«–</span></div>
                        <div class="text-center p-4 bg-[#00A0B0] text-white rounded-lg shadow-md w-48"><span>èª¿æ•´</span></div>
                    </div>
                     <p class="text-center text-gray-700 mt-8 font-semibold">è§£æ±ºå•é¡Œçš„ç§‘å­¸è¿´è·¯ï¼šé‡åˆ°å•é¡Œæ™‚ï¼Œå¤§è†½å‡è¨­ï¼Œå°å¿ƒæ±‚è­‰ï¼Œå¾—å‡ºçµè«–ï¼Œåšå‡ºèª¿æ•´ã€‚é€™æ˜¯ä¸€å€‹æŒçºŒè¿­ä»£ã€é€¼è¿‘çœŸç›¸çš„éç¨‹ï¼Œèƒ½æœ‰æ•ˆé¿å…æ†‘ç¶“é©—åšæ±ºç­–çš„é™·é˜±ã€‚</p>
                </div>
            </section>
            
            <section id="section3">
                <div class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                    <h2 class="text-2xl md:text-3xl font-bold text-center mb-2 text-[#00A0B0]">å€‹é«”é€²åŒ–çš„åº•å±¤é‚è¼¯</h2>
                    <p class="text-center text-gray-600 mb-8 max-w-3xl mx-auto">å°‡äººç”Ÿè¦–ç‚ºä¸€å®¶å…¬å¸ä¾†ç¶“ç‡Ÿï¼Œå…¶æˆåŠŸçš„é—œéµåœ¨æ–¼ç†è§£å…¶å•†æ¥­æ¨¡å¼ã€‚åŒæ™‚ï¼Œä¹Ÿè¦èªè­˜åˆ°ä¸åŒé ˜åŸŸçš„æˆåŠŸæ¨¡å¼éµå¾ªè‘—ä¸åŒçš„æ•¸å­¸è¦å¾‹ï¼Œåšå‡ºæ­£ç¢ºçš„é¸æ“‡æ¯”ç›²ç›®åŠªåŠ›æ›´é‡è¦ã€‚</p>
                    
                    <div class="text-center mb-12">
                        <p class="text-2xl md:text-4xl font-bold">äººç”Ÿå•†æ¥­æ¨¡å¼ =</p>
                        <p class="text-3xl md:text-5xl font-bold mt-2"><span class="text-[#EB6841]">èƒ½åŠ›</span> Ã— <span class="text-[#EDC951]">æ•ˆç‡</span> Ã— <span class="text-[#00A0B0]">æ§“æ¡¿</span></p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                        <div>
                            <h3 class="text-xl font-bold text-center mb-4">å…©ç¨®æˆåŠŸæ©Ÿç‡åˆ†ä½ˆæ¨¡å‹</h3>
                            <div class="chart-container h-64 md:h-80">
                                <canvas id="distributionChart"></canvas>
                            </div>
                        </div>
                        <div>
                            <h4 class="text-lg font-bold text-[#6A4A3C]">å¸¸æ…‹åˆ†ä½ˆ (éª°ç›…é­”å’’)</h4>
                            <p class="text-gray-600 mb-4">é©ç”¨æ–¼é‚Šéš›äº¤ä»˜æ™‚é–“é«˜çš„ã€Œæœå‹™ã€é ˜åŸŸï¼Œå¦‚è«®è©¢ã€æ‰‹å·¥æ¥­ã€‚å¤§éƒ¨åˆ†äººçš„è¡¨ç¾å’Œæ”¶å…¥é›†ä¸­åœ¨ä¸­é–“å€åŸŸï¼Œé ­éƒ¨å’Œå°¾éƒ¨è¼ƒå°‘ã€‚é›–ç„¶é›£ä»¥ç²å¾—æŒ‡æ•¸ç´šå¢é•·ï¼Œä½†ç›¸å°ç©©å®šï¼Œä¸æ˜“è¢«å£Ÿæ–·ã€‚</p>
                            <h4 class="text-lg font-bold text-[#CC333F]">å†ªå¾‹åˆ†ä½ˆ (å½åˆ€èª˜æƒ‘)</h4>
                            <p class="text-gray-600">é©ç”¨æ–¼é‚Šéš›äº¤ä»˜æ™‚é–“ç‚ºé›¶çš„ã€Œç”¢å“ã€é ˜åŸŸï¼Œå¦‚è»Ÿé«”ã€å…§å®¹å‰µä½œã€‚æ¥µå°‘æ•¸é ­éƒ¨ç©å®¶ä½”æ“šçµ•å¤§éƒ¨åˆ†å¸‚å ´å’Œæ”¶ç›Šï¼Œè´å®¶é€šåƒã€‚é¢¨éšªæ¥µé«˜ï¼Œä½†æ½›åœ¨å›å ±ä¹Ÿæ¥µå¤§ã€‚</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="section4">
                <div class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                    <h2 class="text-2xl md:text-3xl font-bold text-center mb-2 text-[#00A0B0]">ç†è§£ä»–äººçš„åº•å±¤é‚è¼¯</h2>
                    <p class="text-center text-gray-600 mb-8 max-w-3xl mx-auto">é«˜æ•ˆçš„æºé€šèˆ‡å”ä½œï¼Œå§‹æ–¼å°ä»–äººæ€ç¶­æ¡†æ¶çš„ç†è§£ã€‚é»ƒé‡‘ä¸‰å•ï¼ˆWhat, Why, Howï¼‰æ˜¯å‰–æå•é¡Œã€é”æˆå…±è­˜çš„åˆ©å™¨ï¼Œå®ƒèƒ½å¹«åŠ©æˆ‘å€‘åœ¨æºé€šä¸­æ‰¾åˆ°æ­£ç¢ºçš„åˆ‡å…¥é»ã€‚</p>
                    <div class="relative w-80 h-80 md:w-96 md:h-96 mx-auto">
                        <div class="absolute inset-0 rounded-full bg-[#00A0B0] flex items-center justify-center text-white text-2xl font-bold">
                            <p>WHY</p>
                        </div>
                        <div class="absolute inset-8 md:inset-12 rounded-full bg-[#EB6841] flex items-center justify-center text-white text-2xl font-bold">
                            <p>HOW</p>
                        </div>
                        <div class="absolute inset-20 md:inset-24 rounded-full bg-[#EDC951] flex items-center justify-center text-white text-2xl font-bold">
                            <p>WHAT</p>
                        </div>
                    </div>
                    <p class="text-center text-gray-700 mt-8 font-semibold max-w-2xl mx-auto">æºé€šçš„é»ƒé‡‘åœˆæ³•å‰‡ï¼šäººå€‘ä¸æœƒç‚ºä½ åšä»€éº¼ï¼ˆWhatï¼‰è²·å–®ï¼Œè€Œæ˜¯ç‚ºä½ ç‚ºä»€éº¼åšï¼ˆWhyï¼‰è²·å–®ã€‚å¾Whyå‡ºç™¼ï¼Œæ‰èƒ½æ¿€ç™¼å…±é³´ã€å»ºç«‹ä¿¡ä»»ï¼›æ¥è‘—é—¡è¿°å¦‚ä½•å¯¦ç¾ï¼ˆHowï¼‰ï¼›æœ€å¾Œæ‰èªªæ˜å…·é«”æ˜¯ä»€éº¼ï¼ˆWhatï¼‰ã€‚</p>
                </div>
            </section>

            <section id="section5">
                <div class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                    <h2 class="text-2xl md:text-3xl font-bold text-center mb-2 text-[#00A0B0]">ç¤¾æœƒå”ä½œçš„åº•å±¤é‚è¼¯</h2>
                    <p class="text-center text-gray-600 mb-8 max-w-3xl mx-auto">åœ¨å•†æ¥­ä¸–ç•Œä¸­ï¼ŒçœŸæ­£çš„åˆ©æ½¤ä¸¦éä¾†è‡ªè¾›è‹¦å‹ä½œï¼Œè€Œæ˜¯ä¾†è‡ªæ–¼å»ºç«‹èµ·å°æ‰‹ç„¡æ³•è¤‡è£½çš„å„ªå‹¢ã€‚ç†è§£åˆ©æ½¤çš„ä¾†æºï¼Œæ˜¯åˆ¶å®šæœ‰æ•ˆç«¶çˆ­ç­–ç•¥çš„åŸºç¤ã€‚</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                        <div>
                            <h3 class="text-xl font-bold text-center mb-4">åˆ©æ½¤çš„çœŸå¯¦æ§‹æˆ</h3>
                            <div class="chart-container h-48 md:h-64">
                                <canvas id="profitChart"></canvas>
                            </div>
                        </div>
                        <div>
                            <h4 class="text-lg font-bold text-[#EDC951]">è¶¨å‹¢ç´…åˆ©</h4>
                            <p class="text-gray-600 mb-4">æ—©æœŸé€²å…¥å¸‚å ´ç²å¾—çš„è¶…é¡æ”¶ç›Šã€‚é€™æ˜¯å¸‚å ´çµ¦äºˆçš„æ©Ÿæœƒï¼Œä½†æœƒéš¨è‘—ç«¶çˆ­åŠ åŠ‡è€Œè¿…é€Ÿæ¶ˆå¤±ï¼Œä¸¦éä¼æ¥­çš„æ ¸å¿ƒèƒ½åŠ›ã€‚</p>
                            <h4 class="text-lg font-bold text-[#6A4A3C]">ç¤¾æœƒå·¥è³‡</h4>
                            <p class="text-gray-600 mb-4">åœ¨å®Œå…¨ç«¶çˆ­çš„å¸‚å ´ä¸­ï¼Œä¼æ¥­åªèƒ½è³ºå–ç¶­æŒé‹ç‡Ÿçš„å¹³å‡åˆ©æ½¤ã€‚é€™ä¸æ˜¯çœŸæ­£çš„åˆ©æ½¤ï¼Œåªæ˜¯ç¤¾æœƒç‚ºä½ çš„è¾›è‹¦å‹å‹•æ”¯ä»˜çš„å ±é…¬ã€‚</p>
                            <h4 class="text-lg font-bold text-[#CC333F]">å‰µæ–°åˆ©æ½¤</h4>
                            <p class="text-gray-600">é€éæŠ€è¡“ã€æ•ˆç‡æˆ–å•†æ¥­æ¨¡å¼çš„å‰µæ–°ï¼Œå»ºç«‹èµ·å°æ‰‹ç„¡æ³•æ¨¡ä»¿çš„æˆæœ¬æˆ–åƒ¹å€¼å„ªå‹¢ã€‚é€™éƒ¨åˆ†æ‰æ˜¯ä¼æ¥­çœŸæ­£çš„ã€å¯æŒçºŒçš„åˆ©æ½¤ä¾†æºã€‚</p>
                        </div>
                    </div>

                    <div class="mt-8 border-t-2 border-dashed border-gray-300 pt-8">
                        <h3 class="text-xl md:text-2xl font-bold text-center mb-4">âœ¨ AI å‰µæ–°é»å­ç”Ÿæˆå™¨</h3>
                        <p class="text-center text-gray-600 mb-6">è¼¸å…¥æ‚¨çš„è¡Œæ¥­æˆ–ç”¢å“é ˜åŸŸï¼Œè®“AIç‚ºæ‚¨ç™¼æƒ³å‰µé€ ã€Œå‰µæ–°åˆ©æ½¤ã€çš„é»å­ã€‚</p>
                        <div class="max-w-2xl mx-auto">
                            <input type="text" id="industryInput" class="w-full p-3 border border-gray-300 rounded-lg ai-input" placeholder="ä¾‹å¦‚ï¼šé¤é£²æ¥­ã€ç·šä¸Šæ•™è‚²ã€å‚³çµ±è£½é€ æ¥­...">
                            <button id="generateIdeasBtn" class="w-full mt-4 bg-gradient-to-r from-[#EB6841] to-[#CC333F] text-white font-bold py-3 px-6 rounded-lg ai-button">
                                ç”Ÿæˆå‰µæ–°é»å­
                            </button>
                        </div>
                        <div id="ideasResult" class="mt-8 p-6 bg-gray-50 rounded-lg min-h-[100px]"></div>
                    </div>

                </div>
            </section>
        </main>

        <footer class="text-center mt-16 text-gray-500">
            <p>åŸºæ–¼åŠ‰æ½¤ã€Šåº•å±¤é‚è¼¯ã€‹ä¸€æ›¸æ ¸å¿ƒæ¦‚å¿µè£½ä½œ</p>
            <p>Infographic with AI</p>
        </footer>

    </div>

    <script>
        function wrapText(label) {
            const maxLength = 16;
            if (typeof label !== 'string' || label.length <= maxLength) {
                return label;
            }
            const words = label.split(' ');
            const lines = [];
            let currentLine = '';
            for (const word of words) {
                if ((currentLine + word).length > maxLength) {
                    lines.push(currentLine.trim());
                    currentLine = '';
                }
                currentLine += word + ' ';
            }
            lines.push(currentLine.trim());
            return lines;
        }

        const mandatoryTooltipOptions = {
            plugins: {
                tooltip: {
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            if (Array.isArray(label)) {
                              return label.join(' ');
                            } else {
                              return label;
                            }
                        }
                    }
                }
            }
        };

        const distributionCtx = document.getElementById('distributionChart').getContext('2d');
        const normalDistributionData = Array.from({ length: 100 }, (_, i) => {
            const x = (i - 50) / 10;
            return { x: x, y: Math.exp(-0.5 * x * x) / (Math.sqrt(2 * Math.PI)) };
        });
        const powerLawData = Array.from({ length: 99 }, (_, i) => {
            const x = (i + 1) / 20;
            return { x: x, y: 1 / Math.pow(x, 1.5) };
        });

        new Chart(distributionCtx, {
            type: 'line',
            data: {
                datasets: [{
                    label: 'å¸¸æ…‹åˆ†ä½ˆ (æœå‹™æ¥­)',
                    data: normalDistributionData,
                    borderColor: '#6A4A3C',
                    backgroundColor: 'rgba(106, 74, 60, 0.2)',
                    fill: true,
                    tension: 0.4,
                    pointRadius: 0
                }, {
                    label: 'å†ªå¾‹åˆ†ä½ˆ (ç”¢å“æ¥­)',
                    data: powerLawData,
                    borderColor: '#CC333F',
                    backgroundColor: 'rgba(204, 51, 63, 0.2)',
                    fill: true,
                    tension: 0.4,
                    pointRadius: 0
                }]
            },
            options: {
                ...mandatoryTooltipOptions,
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        type: 'linear',
                        title: { display: true, text: 'è¡¨ç¾/æ’å' }
                    },
                    y: {
                        title: { display: true, text: 'äººæ•¸/æ”¶ç›Š' }
                    }
                }
            }
        });

        const profitCtx = document.getElementById('profitChart').getContext('2d');
        const profitLabels = ['è¶¨å‹¢ç´…åˆ©', 'ç¤¾æœƒå·¥è³‡', wrapText('ä¾†è‡ªå‰µæ–°çš„çœŸæ­£åˆ©æ½¤')];
        new Chart(profitCtx, {
            type: 'bar',
            data: {
                labels: profitLabels,
                datasets: [{
                    label: 'åˆ©æ½¤æ§‹æˆ',
                    data: [65, 25, 10],
                    backgroundColor: [
                        '#EDC951',
                        '#6A4A3C',
                        '#CC333F'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                ...mandatoryTooltipOptions,
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        stacked: true,
                        display: false
                    },
                    y: {
                        stacked: true
                    }
                },
                plugins: {
                    ...mandatoryTooltipOptions.plugins,
                    legend: {
                        display: false
                    }
                }
            }
        });

        const analyzeDilemmaBtn = document.getElementById('analyzeDilemmaBtn');
        const dilemmaInput = document.getElementById('dilemmaInput');
        const dilemmaResult = document.getElementById('dilemmaResult');

        const generateIdeasBtn = document.getElementById('generateIdeasBtn');
        const industryInput = document.getElementById('industryInput');
        const ideasResult = document.getElementById('ideasResult');

        // ----- å¾Œç«¯ä»£ç† API è¨­å®šé–‹å§‹ -----
        // é€™å€‹ URL æŒ‡å‘æ‚¨åœ¨ç¬¬äºŒæ­¥å»ºç«‹çš„å¾Œç«¯ä»£ç†æœå‹™
        const proxyApiUrl = 'https://logic-app-by-nick.netlify.app/.netlify/functions/perplexity-proxy'; 
        // ----- å¾Œç«¯ä»£ç† API è¨­å®šçµæŸ -----

        async function callApiThroughProxy(prompt, resultContainer, isStructured = false) {
            resultContainer.innerHTML = '<div class="flex justify-center items-center"><div class="loader"></div><p class="ml-4">åˆ†æç”Ÿæˆä¸­ï¼Œè«‹ç¨å€™...</p></div>';
            
            const payload = {
                prompt,
                isStructured
            };

            let retries = 3;
            let delay = 1000;
            while (retries > 0) {
                try {
                    const response = await fetch(proxyApiUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorBody = await response.text();
                        throw new Error(`Proxy error! status: ${response.status}, body: ${errorBody}`);
                    }

                    const result = await response.json();
                    
                    if (result.choices && result.choices.length > 0 && result.choices[0].message) {
                        const text = result.choices[0].message.content;
                        
                        if (isStructured) {
                            try {
                                const jsonMatch = text.match(/\[.*\]/s);
                                if (jsonMatch) {
                                    displayDilemmaAnalysis(JSON.parse(jsonMatch[0]));
                                } else {
                                    throw new Error("API did not return a valid JSON array.");
                                }
                            } catch (e) {
                                 resultContainer.innerHTML = `<p class="text-red-500 text-center">ç„¡æ³•è§£æAIå›å‚³çš„æ ¼å¼ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚</p>`;
                            }
                        } else {
                            displayInnovationIdeas(text);
                        }
                        return;
                    } else if (result.error) {
                        throw new Error(result.error);
                    }
                    else {
                         throw new Error("Invalid API response structure");
                    }
                } catch (error) {
                    console.error("API call failed:", error);
                    retries--;
                    if (retries === 0) {
                        resultContainer.innerHTML = `<p class="text-red-500 text-center">åˆ†æå¤±æ•—ï¼Œè«‹æª¢æŸ¥æ‚¨çš„å¾Œç«¯æœå‹™æˆ–ç¶²è·¯é€£ç·šï¼Œç„¶å¾Œå†è©¦ã€‚</p>`;
                    } else {
                        await new Promise(res => setTimeout(res, delay));
                        delay *= 2; 
                    }
                }
            }
        }

        function displayDilemmaAnalysis(analysis) {
            dilemmaResult.innerHTML = '';
            const colors = {
                'æ³•å­¸å®¶è¦–è§’': 'border-[#EDC951]',
                'ç¶“æ¿Ÿå­¸å®¶è¦–è§’': 'border-[#EB6841]',
                'å•†äººè¦–è§’': 'border-[#CC333F]'
            };
            const emojis = {
                'æ³•å­¸å®¶è¦–è§’': 'âš–ï¸',
                'ç¶“æ¿Ÿå­¸å®¶è¦–è§’': 'ğŸ’¹',
                'å•†äººè¦–è§’': 'ğŸ‘”'
            };

            analysis.forEach(item => {
                const card = document.createElement('div');
                card.className = `border-2 ${colors[item.perspective] || 'border-gray-300'} rounded-lg p-6`;
                card.innerHTML = `
                    <p class="text-3xl mb-3">${emojis[item.perspective] || 'ğŸ¤”'}</p>
                    <h3 class="text-lg font-bold mb-2">${item.perspective}</h3>
                    <p class="text-gray-600 text-sm">${item.analysis.replace(/\n/g, '<br>')}</p>
                `;
                dilemmaResult.appendChild(card);
            });
        }

        function displayInnovationIdeas(ideas) {
            ideasResult.innerHTML = ideas.replace(/\n/g, '<br>');
        }

        analyzeDilemmaBtn.addEventListener('click', () => {
            const dilemma = dilemmaInput.value.trim();
            if (dilemma) {
                const prompt = `è«‹æ ¹æ“šåŠ‰æ½¤åœ¨ã€Šåº•å±¤é‚è¼¯ã€‹æ›¸ä¸­æå‡ºçš„æ¦‚å¿µï¼Œå¾ã€Œæ³•å­¸å®¶è¦–è§’ã€ã€ã€Œç¶“æ¿Ÿå­¸å®¶è¦–è§’ã€å’Œã€Œå•†äººè¦–è§’ã€é€™ä¸‰å€‹ç¶­åº¦ï¼Œåˆ†æä»¥ä¸‹å•†æ¥­é›£é¡Œã€‚è«‹ç¢ºä¿æ¯å€‹è¦–è§’çš„åˆ†æéƒ½ç°¡æ½”ä¸”åˆ‡ä¸­è¦é»ã€‚\n\né›£é¡Œï¼š\n"${dilemma}"`;
                callApiThroughProxy(prompt, dilemmaResult, true);
            } else {
                dilemmaResult.innerHTML = '<p class="text-red-500 text-center">è«‹å…ˆè¼¸å…¥æ‚¨é‡åˆ°çš„é›£é¡Œã€‚</p>';
            }
        });

        generateIdeasBtn.addEventListener('click', () => {
            const industry = industryInput.value.trim();
            if (industry) {
                const prompt = `è«‹æ ¹æ“šåŠ‰æ½¤åœ¨ã€Šåº•å±¤é‚è¼¯ã€‹ä¸­é—œæ–¼ã€Œå‰µæ–°åˆ©æ½¤ã€ä¾†è‡ªæ–¼ã€Œæ²’æœ‰ç«¶çˆ­ã€çš„æ¦‚å¿µï¼Œç‚ºã€Œ${industry}ã€é€™å€‹é ˜åŸŸï¼Œç™¼æƒ³3å€‹å…·é«”çš„ã€å¯åŸ·è¡Œçš„å‰µæ–°é»å­ã€‚æ¯å€‹é»å­éƒ½æ‡‰è©²æ—¨åœ¨å»ºç«‹ä¸€ç¨®å°æ‰‹é›£ä»¥æ¨¡ä»¿çš„ç¨ç‰¹å„ªå‹¢ï¼Œå¯ä»¥æ˜¯æŠ€è¡“ã€æ•ˆç‡æˆ–å•†æ¥­æ¨¡å¼ä¸Šçš„å‰µæ–°ã€‚è«‹ç”¨æ¸…æ™°ã€æœ‰æ¢ç†çš„æ–¹å¼å‘ˆç¾ã€‚`;
                callApiThroughProxy(prompt, ideasResult, false);
            } else {
                ideasResult.innerHTML = '<p class="text-red-500 text-center">è«‹å…ˆè¼¸å…¥è¡Œæ¥­æˆ–ç”¢å“é ˜åŸŸã€‚</p>';
            }
        });

    </script>

</body>
</html>
